<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.junjie.githelper.controller.MainViewController"
            minHeight="400.0" minWidth="750.0" prefHeight="700.0" prefWidth="1200.0"
            styleClass="bg-default">
    <left>
        <VBox spacing="12" minWidth="150" prefWidth="220" maxWidth="300" 
              style="-fx-padding: 15; -fx-background-color: -color-bg-subtle;">
            <Label text="Projects" styleClass="title-4"/>
            <ListView fx:id="projectListView" VBox.vgrow="ALWAYS" minHeight="150"/>
            <HBox spacing="8" alignment="CENTER">
                <Button text="+" fx:id="addProjectButton" prefWidth="60" styleClass="success"/>
                <Button text="-" fx:id="removeProjectButton" prefWidth="60" styleClass="danger"/>
            </HBox>
        </VBox>
    </left>

    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- æäº¤ä¿¡æ¯ Tab -->
            <Tab fx:id="commitTab" text="ðŸ“ æäº¤ä¿¡æ¯">
                <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="edge-to-edge">
                    <VBox spacing="15" style="-fx-padding: 20;">
                        <VBox spacing="8">
                            <Label text="Staged Changes" styleClass="title-4"/>
                            <TextArea fx:id="stagedChangesTextArea" editable="false" wrapText="true" 
                                      minHeight="100" prefHeight="250" prefRowCount="10"/>
                        </VBox>
                        
                        <Button text="ðŸ”„ Refresh" fx:id="refreshButton" prefWidth="120" styleClass="accent"/>

                        <VBox spacing="8">
                            <Label text="Commit Message" styleClass="title-4"/>
                            <TextArea fx:id="commitMessageTextArea" wrapText="true" 
                                      minHeight="80" prefHeight="200" prefRowCount="8"/>
                        </VBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button text="âœ¨ Generate" fx:id="generateButton" prefWidth="120" styleClass="accent"/>
                            <Button text="ðŸ“‹ Copy" fx:id="copyButton" prefWidth="120"/>
                            <Button text="âœ… Commit" fx:id="commitButton" prefWidth="120" styleClass="success"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
            </Tab>
            
            <!-- ç ”å‘å‘¨æŠ¥ Tab -->
            <Tab fx:id="weeklyReportTab" text="ðŸ“Š ç ”å‘å‘¨æŠ¥">
                <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="edge-to-edge">
                    <VBox spacing="15" style="-fx-padding: 20;">
                        <VBox spacing="10">
                            <Label text="é€‰æ‹©æ—¶é—´æ®µ" styleClass="title-4"/>
                            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-flex-wrap: wrap;">
                                <Label text="å¼€å§‹æ—¥æœŸ:"/>
                                <DatePicker fx:id="startDatePicker" promptText="é€‰æ‹©å¼€å§‹æ—¥æœŸ" prefWidth="150"/>
                                <Label text="ç»“æŸæ—¥æœŸ:"/>
                                <DatePicker fx:id="endDatePicker" promptText="é€‰æ‹©ç»“æŸæ—¥æœŸ" prefWidth="150"/>
                                <Button text="ðŸ“… èŽ·å–æäº¤æ—¥å¿—" fx:id="fetchLogsButton" prefWidth="140" styleClass="accent"/>
                            </HBox>
                        </VBox>
                        
                        <VBox spacing="8">
                            <Label text="æäº¤æ—¥å¿—" styleClass="title-4"/>
                            <TextArea fx:id="commitLogsTextArea" editable="false" wrapText="true" 
                                      minHeight="100" prefHeight="200" prefRowCount="8"/>
                        </VBox>
                        
                        <VBox spacing="8">
                            <Label text="ç ”å‘å‘¨æŠ¥" styleClass="title-4"/>
                            <TextArea fx:id="weeklyReportTextArea" wrapText="true" 
                                      minHeight="100" prefHeight="200" prefRowCount="8"/>
                        </VBox>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Button text="âœ¨ ç”Ÿæˆå‘¨æŠ¥" fx:id="generateReportButton" prefWidth="120" styleClass="accent"/>
                            <Button text="ðŸ“‹ å¤åˆ¶å‘¨æŠ¥" fx:id="copyReportButton" prefWidth="120"/>
                        </HBox>
                    </VBox>
                </ScrollPane>
            </Tab>
        </TabPane>
    </center>

    <right>
        <ScrollPane fitToWidth="true" minWidth="200" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
                    style="-fx-background-color: -color-bg-subtle;">
            <VBox spacing="15" minWidth="190" prefWidth="280" maxWidth="400" style="-fx-padding: 15;">
                <VBox spacing="10">
                    <Label text="âš™ï¸ LLM Settings" styleClass="title-4"/>
                    <GridPane hgap="8" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints minWidth="60" prefWidth="75" hgrow="NEVER"/>
                            <ColumnConstraints minWidth="100" prefWidth="150" hgrow="ALWAYS"/>
                        </columnConstraints>
                        <Label text="Provider:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="providerTextField" GridPane.rowIndex="0" GridPane.columnIndex="1" 
                                   maxWidth="Infinity"/>
                        <Label text="API Key:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <PasswordField fx:id="apiKeyField" GridPane.rowIndex="1" GridPane.columnIndex="1" 
                                       maxWidth="Infinity"/>
                        <Label text="Model:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <TextField fx:id="modelTextField" GridPane.rowIndex="2" GridPane.columnIndex="1" 
                                   maxWidth="Infinity"/>
                        <Label text="Base URL:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                        <TextField fx:id="baseUrlTextField" GridPane.rowIndex="3" GridPane.columnIndex="1" 
                                   maxWidth="Infinity"/>
                    </GridPane>
                </VBox>
                
                <Separator/>
                
                <VBox spacing="10">
                    <Label text="ðŸŒ Proxy Settings" styleClass="title-4"/>
                    <CheckBox fx:id="useProxyCheckBox" text="Enable Proxy"/>
                    <GridPane hgap="8" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints minWidth="60" prefWidth="75" hgrow="NEVER"/>
                            <ColumnConstraints minWidth="100" prefWidth="150" hgrow="ALWAYS"/>
                        </columnConstraints>
                        <Label text="Proxy Host:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <TextField fx:id="proxyHostTextField" GridPane.rowIndex="0" GridPane.columnIndex="1" 
                                   promptText="127.0.0.1" maxWidth="Infinity"/>
                        <Label text="Proxy Port:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <TextField fx:id="proxyPortTextField" GridPane.rowIndex="1" GridPane.columnIndex="1" 
                                   promptText="7890" maxWidth="Infinity"/>
                    </GridPane>
                </VBox>
                
                <Button text="ðŸ’¾ Save Settings" fx:id="saveSettingsButton" prefWidth="140" 
                        maxWidth="Infinity" styleClass="accent"/>

                <Separator/>
                
                <!-- Commit Prompt åŒºåŸŸ -->
                <VBox fx:id="commitPromptSection" spacing="10">
                    <Label text="ðŸ“ Commit Prompt" styleClass="title-4"/>
                    <TextArea fx:id="customPromptTextArea" prefHeight="100" minHeight="60" 
                              wrapText="true" prefRowCount="5"/>
                    <Button text="ðŸ’¾ Save Prompt" fx:id="savePromptButton" prefWidth="140" 
                            maxWidth="Infinity" styleClass="accent"/>
                </VBox>
                
                <Separator fx:id="promptSeparator"/>
                
                <!-- Weekly Report Prompt åŒºåŸŸ -->
                <VBox fx:id="weeklyReportPromptSection" spacing="10" visible="false" managed="false">
                    <Label text="ðŸ“Š Report Prompt" styleClass="title-4"/>
                    <TextArea fx:id="weeklyReportPromptTextArea" prefHeight="100" minHeight="60" 
                              wrapText="true" prefRowCount="5"/>
                    <Button text="ðŸ’¾ Save Prompt" fx:id="saveReportPromptButton" prefWidth="140" 
                            maxWidth="Infinity" styleClass="accent"/>
                </VBox>
            </VBox>
        </ScrollPane>
    </right>
</BorderPane>

